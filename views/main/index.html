<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>IKunDefined</title>
        <link rel="stylesheet" href="/public/css/clean.css">
        <link rel="stylesheet" href="/public/css/main/headBar.css">
        <link rel="stylesheet" href="/public/css/main/postArea.css">
        <link rel="stylesheet" href="/public/css/main/personalIntro.css">
        <link rel="stylesheet" href="/public/css/main/bottomArea.css">
        <link rel="stylesheet" href="/public/css/main/userBox.css">
        <script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.js"></script>
        <script src="/public/js/main/index.js"></script>
        <style>

            /* Basic Style */

            @font-face {
                font-family: "华文细黑";
                src: url("/public/font/华文细黑.ttf");
            }

            html,body {
                height: 100%;
                background: #eee;
                font-family: "华文细黑";
            }

            #wallpaper {
                width: 100%;
                height: 100%;
                background: url("/public/images/wallpaper.jpg") no-repeat fixed;
                background-size: cover;
            }

            /* Layout Style */

            .main-layout {
                display: flex;
                flex-direction: row;
                justify-content: space-between;
                width: 1100px;
                margin: 20px auto;
            }

            .main-layout > .left {
                width: 65%;
            }

            .main-layout > .right {
                width: 30%;
            }
            
        </style>
    </head>
    <body>
        <div id="wallpaper"></div>
        <div id="head-bar">
            <ul class="head-nav">
                <li><a class="navlist" href="#">IKunDefined</a></li>
                <li><a class="navlist" href="/public/unopen.html">分类</a></li>
                <li><a class="navlist" href="/public/unopen.html">动态</a></li>
                <li><a class="navlist" href="/public/unopen.html">留言</a></li>
                <li><a class="navlist" href="/public/unopen.html">关于</a></li>
                <li><a class="navlist" href="/public/unopen.html">实验</a></li>
            </ul>
        </div>
        <div class="main-layout">
            <div class="left">
                {% if contents %}
                    {% for content in contents  %}
                    <div class="post-area">
                        <div class="title-part">
                            <h2><a href="/public/post.html">{{ content.title }}</a></h2>
                        </div>
                        <div class="info-part">
                            <span>发布时间：{{ content.date }}</span>
                            <!-- <span>更新时间：XXXX-XX-XX</span> -->
                            <!-- <span>阅读人数：XXX</span> -->
                            <span>作者：{{ content.author }}</span>
                        </div>
                        <div class="detail-part">
                            <p>{{ content.summary }}</p>
                        </div>
                        <div class="other-info">
                            <!-- <span>分类：测试分类</span> -->
                            <!-- <span>标签：测试标签1, 测试标签2, 测试标签3</span> -->
                        </div>
                        <div class="read-more">
                            <button>阅读更多</button>
                        </div>
                    </div>
                    {% endfor %}
                {% else %}
                    <p>当前还没有文章</p>
                {% endif %}
            </div>
            <div class="right">
                <div class="personal-intro">
                    <div class="personal-info">
                        <div class="avatar">
                            <img src="/public/images/avatar.jpg" alt="个人头像" title="IKunDefined">
                        </div>
                        <h2 class="name">IKunDefined</h2>
                        <p class="motto">- 矛盾共生体 -</p>
                    </div>
                    <ul class="social-link">
                        <li class="bilibili_1 linkicons"></li>
                        <li class="bilibili_2 linkicons"></li>
                        <li class="github linkicons"></li>
                        <li class="weibo linkicons"></li>
                    </ul>
                </div>
                {% if userInfo %}
                <div id="welcome-box">
                    <p>欢迎{{ userInfo.username }}来到我的博客。</p>
                    <a href="/admin">进入管理界面</a>
                    <a id="logout" href="javascript:;">注销</a>
                </div>
                {% else %}
                <div id="signup-box" style="display: none;">
                    <div>
                        <p>
                            <span>账号：</span>
                            <input name="username" type="text">
                        </p>
                        <p>
                            <span>密码：</span>
                            <input name="password" type="password">
                        </p>
                        <p>
                            <span>确认密码：</span>
                            <input name="repassword" type="password">
                        </p>
                        <p>
                            <input name="register" type="button" value="注册">
                        </p>
                    </div>
                    <span>
                        <a href="javascript:;">马上登陆</a>
                    </span>
                    <span class="warning"></span>
                </div>
                <div id="login-box">
                    <div>
                        <p>
                            <span>账号：</span>
                            <input name="username" type="text">
                        </p>
                        <p>
                            <span>密码：</span>
                            <input name="password" type="password">
                        </p>
                        <p>
                            <input type="button" value="登录">
                        </p>
                    </div>
                    <span>
                        <a href="javascript:;">现在注册</a>
                    </span>
                    <span class="warning"></span>
                </div>
                {%endif%}
            </div>
        </div>
        <div class="bottom-area">
            - Build by IKunDefined -
        </div>
        <script>
            var wallPaper = document.getElementById("wallpaper");
            wallPaper.style.height = document.documentElement.clientHeight + "px";
            wallPaper.style.width = document.documentElement.scrollWidth + "px";
            window.onresize = function(){
                wallPaper.style.height = document.documentElement.clientHeight + "px";
                wallPaper.style.width = document.documentElement.scrollWidth + "px";
            }
            window.onscroll = function(){
                var scrollTop = document.documentElement.scrollTop;
                var headBar = document.getElementById("head-bar");
                var a = headBar.getElementsByTagName("a");
                var wallPaperHeight = wallPaper.offsetHeight;
                var headBarHeight = headBar.offsetHeight;
                var changePoint = wallPaperHeight - headBarHeight;
                switch(scrollTop > changePoint){
                    case true:
                        headBar.style.background = "rgba(255,255,255,1)";
                        headBar.style.transition = "all .1s";
                        for(var index in a){
                            a[index].style.color = "#000";
                        }
                    break;
                    case false: 
                        headBar.style.background = "rgba(255,255,255,.2)";
                        headBar.style.transition = "all .1s";
                        for(var index in a){
                            a[index].style.color = "#fff";
                        }
                    break;
                }
            }
        </script>
    </body>
</html>